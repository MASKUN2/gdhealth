<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.tree.gdhealth.customer.programreservation.ProRsOneMapper">
	<select id="proRsOne" resultType="com.tree.gdhealth.customer.programreservation.vo.ProgramReservation" parameterType="java.util.Map">
		SELECT
			  p.program_name programName,
			  pd.program_date programDate,
			  c.customer_id customerId,
			  b.branch_name branchName,
			  pd.program_date_no programDateNo,
			  b.branch_no branchNo
		FROM program_reservation pr INNER JOIN program_date pd
		  on pr.program_date_no = pd.program_date_no INNER JOIN program p
		  on p.program_no = pd.program_no INNER JOIN payment py
		  	on pr.payment_no = py.payment_no INNER JOIN customer c
		  	on py.customer_no = c.customer_no INNER JOIN branch b
		  	on pr.branch_no = b.branch_no
		  WHERE YEAR(pd.program_date) = #{year}
		  AND MONTH(pd.program_date) = #{month}
		  AND DAY(pd.program_date) = #{day}
		  AND p.program_name = #{programName}
		  ORDER BY pd.program_date ASC
	</select>
</mapper>